
<!-- pages/memorial/memorial.wxml -->
<!-- ä¼¦ç†è®¾è®¡æ„å›¾ï¼šçºªå¿µé¡µé¢ä¿æŒé™é»˜æ°›å›´ï¼Œç¦ç”¨å¨±ä¹åŒ–åŠŸèƒ½ -->
<view class="container">
  <!-- é™é»˜èƒŒæ™¯ï¼Œæ— ç²’å­ç‰¹æ•ˆ -->
  <view class="memorial-background"></view>

  <!-- å¤´éƒ¨ä¿¡æ¯ -->
  <view class="header">
    <view class="avatar-wrapper">
      <image
        class="avatar"
        src="{{member.avatarUrl || '/static/images/default-avatar.png'}}"
        mode="aspectFill"
      />
      <!-- å·²æ•…æ ‡è¯† -->
      <view class="deceased-badge" wx:if="{{member.status === 'deceased'}}">
        <text class="badge-icon">â˜†</text>
      </view>
    </view>
    <text class="name">{{member.name}}</text>
    <text class="relationship" wx:if="{{member.relationship}}">{{member.relationship}}</text>
  </view>

  <!-- çºªå¿µæ–‡æœ¬ -->
  <view class="memorial-text-area">
    <text class="memorial-text">{{memorialText}}</text>
  </view>

  <!-- èœ¡çƒ›çºªå¿µ -->
  <!-- ä¼¦ç†è®¾è®¡æ„å›¾ï¼šç®€å•çš„äº¤äº’ï¼Œä¸ä½¿ç”¨å¤æ‚çš„ARæˆ–åŠ¨ç”» -->
  <view class="candle-area">
    <view class="candle-wrapper {{candleLit ? 'lit' : ''}}" bindtap="lightCandle">
      <text class="candle-icon">{{candleLit ? 'ğŸ•¯ï¸' : 'ğŸ•¯ï¸'}}</text>
      <text class="candle-label">{{candleLit ? 'å·²ç‚¹ç‡ƒ' : 'ç‚¹å‡»ç‚¹ç‡ƒèœ¡çƒ›'}}</text>
    </view>
  </view>

  <!-- ç•™è¨€ç»Ÿè®¡ -->
  <view class="stats-area" wx:if="{{messageCount > 0}}">
    <text class="stats-text">{{messageCount}} æ¡æ€å¿µç•™è¨€</text>
  </view>

  <!-- åŠŸèƒ½æŒ‰é’® -->
  <view class="action-area">
    <button class="action-btn" bindtap="sendMessage">
      <text class="btn-icon">ğŸ’­</text>
      <text class="btn-text">å†™ä¸‹æ€å¿µ</text>
    </button>
    <button class="action-btn" bindtap="viewAllMessages" wx:if="{{messageCount > 0}}">
      <text class="btn-icon">ğŸ“œ</text>
      <text class="btn-text">æŸ¥çœ‹ç•™è¨€</text>
    </button>
  </view>

  <!-- ä¼¦ç†æç¤º -->
  <!-- ä¼¦ç†è®¾è®¡æ„å›¾ï¼šæ˜ç¡®çºªå¿µæ¨¡å¼ä¸‹çš„åŠŸèƒ½é™åˆ¶ -->
  <view class="ethics-notice">
    <text class="notice-text">æ€å¿µæ— éœ€å–§åš£ï¼Œçˆ±åœ¨é™é»˜ä¸­é•¿å­˜</text>
  </view>
</view>
